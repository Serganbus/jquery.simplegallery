!function(a){a.fn.createSimpleImgGallery=function(){a(this).append(a('<div style="clear:both;" />'));for(var b=a(this).find("a"),c=b.length,d=0;d<c;d++){var e=a(b[d]);e.attr("data-id",d),e.find("img").css({float:"left",width:"40px",height:"40px",margin:"2px"})}var f=[],g=null,h=null,i=a('<div id="codengineering_overlay"></div>'),j=a('<div class="wrapper"></div>'),k=a('<div class="img_inner_wrapper" data-rotation="0"></div>'),l=a('<div class="img_wrapper"></div>'),m=a('<div class="nav-btn nav-btn-left pointer"><span class="fa fa-caret-left"></span></div>'),n=a('<div class="nav-btn nav-btn-right pointer"><span class="fa fa-caret-right"></span></div>'),o=a('<div class="settings_wrapper"></div>'),p=a('<div class="settings"></div>'),q=a('<a><i class="fa fa-rotate-left pointer"></i></a>'),r=a('<a><i class="fa fa-rotate-right pointer"></i></a>'),s=a('<a download><i class="fa fa-download pointer"></i></a>'),t=a('<div class="loading_wrapper"></div>'),u=a('<div class="loading_text"><i class="fa fa-refresh fa-spin fa-3x fa-fw margin-bottom"></i></div>'),v=a("<p></p>");i.append(j),l.append(k),o.append(p),p.append("&nbsp;").append(q).append("&nbsp;").append(r).append("&nbsp;").append(s).append("&nbsp;"),t.append(u),j.append(l).append(o).append(m).append(n).append(t).append(v),a("body").append(i);var w=null,x=null,y=function(){if(g){h&&h.remove(),g.appendTo(k);var a=j.height(),b=j.width(),c=parseInt(k.attr("data-rotation"));c%180!==0&&(a=j.width(),b=j.height()),g.width("auto"),g.height(a),g.width()>b&&(g.width(b),g.height("auto"));var d=g.height(),e=g.width();k.css("margin-top",-d/2+"px"),k.css("margin-left",-e/2+"px"),m.css("line-height",m.height()+"px"),n.css("line-height",n.height()+"px"),t.css("line-height",j.height()+"px")}},z=function(d){i.show(),j.animate({opacity:1},300),d=parseInt(d);var e=d===c-1,g=0===d,h=a(b[d]);if(f[d])A(d);else{var k=a("<img />");k.attr("src",h.attr("href")),k.on("load",function(){f[d]=k,u.animate({opacity:0},100),A(d)}),u.animate({opacity:1},100)}var l=h.children("img").attr("alt");v.text(l),g&&m.hide(),g||(w=b[d-1],m.show()),e&&n.hide(),e||(x=b[1+d],n.show())},A=function(a){h=g,g=f[a],s.attr("href",g.attr("src")),C(0),y()},B=function(a){a=parseInt(a);var b=parseInt(k.attr("data-rotation")),c=b+a;C(c),y()},C=function(a){k.attr("data-rotation",a),k.css({"-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)",transform:"rotate("+a+"deg)"})};i.click(function(){i.hide(),j.css("opacity",0)}),m.click(function(b){b.stopPropagation(),z(a(w).attr("data-id"))}),n.click(function(b){b.stopPropagation(),z(a(x).attr("data-id"))}),b.click(function(b){b.preventDefault(),z(a(this).attr("data-id"))}),q.click(function(a){a.stopPropagation(),B(-90)}),r.click(function(a){a.stopPropagation(),B(90)}),s.click(function(a){a.stopPropagation()}),a(window).on("resize",y)}}(jQuery);